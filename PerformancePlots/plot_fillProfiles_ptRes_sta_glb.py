print >> sys.stderr, "Fill profiles"

h_ptRes_sta_glb_eta = [
  [ h_ptRes_sta_glb_eta_m24_m21, -2.4, -2.1, -2.25],
  [ h_ptRes_sta_glb_eta_m21_m18, -2.1, -1.8, -1.95],
  [ h_ptRes_sta_glb_eta_m18_m15, -1.8, -1.5, -1.65],
  [ h_ptRes_sta_glb_eta_m15_m12, -1.5, -1.2, -1.35],
  [ h_ptRes_sta_glb_eta_m12_m09, -1.2, -0.9, -1.05],
  [ h_ptRes_sta_glb_eta_m09_m06, -0.9, -0.6, -0.75],
  [ h_ptRes_sta_glb_eta_m06_m03, -0.6, -0.3, -0.45],
  [ h_ptRes_sta_glb_eta_m03_m00, -0.3,  0.0, -0.15],
  [ h_ptRes_sta_glb_eta_p00_p03,  0.0,  0.3,  0.15],
  [ h_ptRes_sta_glb_eta_p03_p06,  0.3,  0.6,  0.45],
  [ h_ptRes_sta_glb_eta_p06_p09,  0.6,  0.9,  0.75],
  [ h_ptRes_sta_glb_eta_p09_p12,  0.9,  1.2,  1.05],
  [ h_ptRes_sta_glb_eta_p12_p15,  1.2,  1.5,  1.35],
  [ h_ptRes_sta_glb_eta_p15_p18,  1.5,  1.8,  1.65],
  [ h_ptRes_sta_glb_eta_p18_p21,  1.8,  2.1,  1.95],
  [ h_ptRes_sta_glb_eta_p21_p24,  2.1,  2.4,  2.25],
]

h_ptRes_sta_glb_phi = [
  [ h_ptRes_sta_glb_phi_m32_m28, -3.2, -2.8, -3.0],
  [ h_ptRes_sta_glb_phi_m28_m24, -2.8, -2.4, -2.6],
  [ h_ptRes_sta_glb_phi_m24_m20, -2.4, -2.0, -2.2],
  [ h_ptRes_sta_glb_phi_m20_m16, -2.0, -1.6, -1.8],
  [ h_ptRes_sta_glb_phi_m16_m12, -1.6, -1.2, -1.4],
  [ h_ptRes_sta_glb_phi_m12_m08, -1.2, -0.8, -1.0],
  [ h_ptRes_sta_glb_phi_m08_m04, -0.8, -0.4, -0.6],
  [ h_ptRes_sta_glb_phi_m04_m00, -0.4,  0.0, -0.2],
  [ h_ptRes_sta_glb_phi_p00_p04,  0.0,  0.4,  0.2],
  [ h_ptRes_sta_glb_phi_p04_p08,  0.4,  0.8,  0.6],
  [ h_ptRes_sta_glb_phi_p08_p12,  0.8,  1.2,  1.0],
  [ h_ptRes_sta_glb_phi_p12_p16,  1.2,  1.6,  1.4],
  [ h_ptRes_sta_glb_phi_p16_p20,  1.6,  2.0,  1.8],
  [ h_ptRes_sta_glb_phi_p20_p24,  2.0,  2.4,  2.2],
  [ h_ptRes_sta_glb_phi_p24_p28,  2.4,  2.8,  2.6],
  [ h_ptRes_sta_glb_phi_p28_p32,  2.8,  3.2,  3.0],
]

h_ptRes_sta_glbB_phi = [
  [ h_ptRes_sta_glbB_phi_m32_m28, -3.2, -2.8, -3.0],
  [ h_ptRes_sta_glbB_phi_m28_m24, -2.8, -2.4, -2.6],
  [ h_ptRes_sta_glbB_phi_m24_m20, -2.4, -2.0, -2.2],
  [ h_ptRes_sta_glbB_phi_m20_m16, -2.0, -1.6, -1.8],
  [ h_ptRes_sta_glbB_phi_m16_m12, -1.6, -1.2, -1.4],
  [ h_ptRes_sta_glbB_phi_m12_m08, -1.2, -0.8, -1.0],
  [ h_ptRes_sta_glbB_phi_m08_m04, -0.8, -0.4, -0.6],
  [ h_ptRes_sta_glbB_phi_m04_m00, -0.4,  0.0, -0.2],
  [ h_ptRes_sta_glbB_phi_p00_p04,  0.0,  0.4,  0.2],
  [ h_ptRes_sta_glbB_phi_p04_p08,  0.4,  0.8,  0.6],
  [ h_ptRes_sta_glbB_phi_p08_p12,  0.8,  1.2,  1.0],
  [ h_ptRes_sta_glbB_phi_p12_p16,  1.2,  1.6,  1.4],
  [ h_ptRes_sta_glbB_phi_p16_p20,  1.6,  2.0,  1.8],
  [ h_ptRes_sta_glbB_phi_p20_p24,  2.0,  2.4,  2.2],
  [ h_ptRes_sta_glbB_phi_p24_p28,  2.4,  2.8,  2.6],
  [ h_ptRes_sta_glbB_phi_p28_p32,  2.8,  3.2,  3.0],
]

h_ptRes_sta_glbEOp_phi = [
  [ h_ptRes_sta_glbEOp_phi_m32_m28, -3.2, -2.8, -3.0],
  [ h_ptRes_sta_glbEOp_phi_m28_m24, -2.8, -2.4, -2.6],
  [ h_ptRes_sta_glbEOp_phi_m24_m20, -2.4, -2.0, -2.2],
  [ h_ptRes_sta_glbEOp_phi_m20_m16, -2.0, -1.6, -1.8],
  [ h_ptRes_sta_glbEOp_phi_m16_m12, -1.6, -1.2, -1.4],
  [ h_ptRes_sta_glbEOp_phi_m12_m08, -1.2, -0.8, -1.0],
  [ h_ptRes_sta_glbEOp_phi_m08_m04, -0.8, -0.4, -0.6],
  [ h_ptRes_sta_glbEOp_phi_m04_m00, -0.4,  0.0, -0.2],
  [ h_ptRes_sta_glbEOp_phi_p00_p04,  0.0,  0.4,  0.2],
  [ h_ptRes_sta_glbEOp_phi_p04_p08,  0.4,  0.8,  0.6],
  [ h_ptRes_sta_glbEOp_phi_p08_p12,  0.8,  1.2,  1.0],
  [ h_ptRes_sta_glbEOp_phi_p12_p16,  1.2,  1.6,  1.4],
  [ h_ptRes_sta_glbEOp_phi_p16_p20,  1.6,  2.0,  1.8],
  [ h_ptRes_sta_glbEOp_phi_p20_p24,  2.0,  2.4,  2.2],
  [ h_ptRes_sta_glbEOp_phi_p24_p28,  2.4,  2.8,  2.6],
  [ h_ptRes_sta_glbEOp_phi_p28_p32,  2.8,  3.2,  3.0],
]

h_ptRes_sta_glbEOm_phi = [
  [ h_ptRes_sta_glbEOm_phi_m32_m28, -3.2, -2.8, -3.0],
  [ h_ptRes_sta_glbEOm_phi_m28_m24, -2.8, -2.4, -2.6],
  [ h_ptRes_sta_glbEOm_phi_m24_m20, -2.4, -2.0, -2.2],
  [ h_ptRes_sta_glbEOm_phi_m20_m16, -2.0, -1.6, -1.8],
  [ h_ptRes_sta_glbEOm_phi_m16_m12, -1.6, -1.2, -1.4],
  [ h_ptRes_sta_glbEOm_phi_m12_m08, -1.2, -0.8, -1.0],
  [ h_ptRes_sta_glbEOm_phi_m08_m04, -0.8, -0.4, -0.6],
  [ h_ptRes_sta_glbEOm_phi_m04_m00, -0.4,  0.0, -0.2],
  [ h_ptRes_sta_glbEOm_phi_p00_p04,  0.0,  0.4,  0.2],
  [ h_ptRes_sta_glbEOm_phi_p04_p08,  0.4,  0.8,  0.6],
  [ h_ptRes_sta_glbEOm_phi_p08_p12,  0.8,  1.2,  1.0],
  [ h_ptRes_sta_glbEOm_phi_p12_p16,  1.2,  1.6,  1.4],
  [ h_ptRes_sta_glbEOm_phi_p16_p20,  1.6,  2.0,  1.8],
  [ h_ptRes_sta_glbEOm_phi_p20_p24,  2.0,  2.4,  2.2],
  [ h_ptRes_sta_glbEOm_phi_p24_p28,  2.4,  2.8,  2.6],
  [ h_ptRes_sta_glbEOm_phi_p28_p32,  2.8,  3.2,  3.0],
]

iSample = -1
for sample in samples:
  iSample = iSample + 1
  
  color  = sample[3][0]
  marker = sample[3][1]
  
  # Transverse momentum resolution in 16 bins of eta
  ptResFitSigma_sta_glb_eta     = array("d")
  ptResFitSigma_sta_glb_eta_Err = array("d")
  ptResFitMean_sta_glb_eta     = array("d")
  ptResFitMean_sta_glb_eta_Err = array("d")
  eta     = array("d")
  eta_Err = array("d")
  
  iHisto = -1
  for h in h_ptRes_sta_glb_eta:
    iHisto = iHisto + 1
    
#    fitFunc = h[0][ iSample ].GetFunction( "fit"+h[0][ iSample ].GetName() )
#    ptResFitSigma_sta_glb_eta.append( fitFunc.GetParameter( "Sigma" ) )
#    ptResFitSigma_sta_glb_eta_Err.append( fitFunc.GetParError( 2 ) )
#    ptResFitMean_sta_glb_eta.append( fitFunc.GetParameter( "Mean" ) )
#    ptResFitMean_sta_glb_eta_Err.append( fitFunc.GetParError( 1 ) )
    
    ptResFitSigma_sta_glb_eta.append( h[0][ iSample ].GetRMS() )
    ptResFitSigma_sta_glb_eta_Err.append( h[0][ iSample ].GetRMSError() )
    ptResFitMean_sta_glb_eta.append( h[0][ iSample ].GetMean() )
    ptResFitMean_sta_glb_eta_Err.append( h[0][ iSample ].GetMeanError() )
    
    eta.append( h[3] )
    eta_Err.append( 0.15 )

  p_ptResFitSigma_sta_glb_eta.append ( ROOT.TGraphErrors( len(h_ptRes_sta_glb_eta), eta, ptResFitSigma_sta_glb_eta, eta_Err, ptResFitSigma_sta_glb_eta_Err ) )
  p_ptResFitSigma_sta_glb_eta[ iSample ].SetLineColor(color)
  p_ptResFitSigma_sta_glb_eta[ iSample ].SetMarkerColor(color)
  p_ptResFitSigma_sta_glb_eta[ iSample ].SetMarkerStyle(marker)
  
  p_ptResFitMean_sta_glb_eta.append ( ROOT.TGraphErrors( len(h_ptRes_sta_glb_eta), eta, ptResFitMean_sta_glb_eta, eta_Err, ptResFitMean_sta_glb_eta_Err ) )
  p_ptResFitMean_sta_glb_eta[ iSample ].SetLineColor(color)
  p_ptResFitMean_sta_glb_eta[ iSample ].SetMarkerColor(color)
  p_ptResFitMean_sta_glb_eta[ iSample ].SetMarkerStyle(marker)
  
  # Transverse momentum resolution in 16 bins of phi in all eta (-2.4 < eta < 2.4)
  ptResFitSigma_sta_glb_phi     = array("d")
  ptResFitSigma_sta_glb_phi_Err = array("d")
  ptResFitMean_sta_glb_phi     = array("d")
  ptResFitMean_sta_glb_phi_Err = array("d")
  phi     = array("d")
  phi_Err = array("d")
  
  iHisto = -1
  for h in h_ptRes_sta_glb_phi:
    iHisto = iHisto + 1
    
#    fitFunc = h[0][ iSample ].GetFunction( "fit"+h[0][ iSample ].GetName() )
#    ptResFitSigma_sta_glb_phi.append( fitFunc.GetParameter( "Sigma" ) )
#    ptResFitSigma_sta_glb_phi_Err.append( fitFunc.GetParError( 2 ) )
#    ptResFitMean_sta_glb_phi.append( fitFunc.GetParameter( "Mean" ) )
#    ptResFitMean_sta_glb_phi_Err.append( fitFunc.GetParError( 1 ) )
    
    ptResFitSigma_sta_glb_phi.append( h[0][ iSample ].GetRMS() )
    ptResFitSigma_sta_glb_phi_Err.append( h[0][ iSample ].GetRMSError() )
    ptResFitMean_sta_glb_phi.append( h[0][ iSample ].GetMean() )
    ptResFitMean_sta_glb_phi_Err.append( h[0][ iSample ].GetMeanError() )
    
    phi.append( h[3] )
    phi_Err.append( 0.15 )

  p_ptResFitSigma_sta_glb_phi.append ( ROOT.TGraphErrors( len(h_ptRes_sta_glb_phi), phi, ptResFitSigma_sta_glb_phi, phi_Err, ptResFitSigma_sta_glb_phi_Err ) )
  p_ptResFitSigma_sta_glb_phi[ iSample ].SetLineColor(color)
  p_ptResFitSigma_sta_glb_phi[ iSample ].SetMarkerColor(color)
  p_ptResFitSigma_sta_glb_phi[ iSample ].SetMarkerStyle(marker)
  
  p_ptResFitMean_sta_glb_phi.append ( ROOT.TGraphErrors( len(h_ptRes_sta_glb_phi), phi, ptResFitMean_sta_glb_phi, phi_Err, ptResFitMean_sta_glb_phi_Err ) )
  p_ptResFitMean_sta_glb_phi[ iSample ].SetLineColor(color)
  p_ptResFitMean_sta_glb_phi[ iSample ].SetMarkerColor(color)
  p_ptResFitMean_sta_glb_phi[ iSample ].SetMarkerStyle(marker)

  # Transverse momentum resolution in 16 bins of phi in Barrel ( -0.9 < eta < 0.9)
  ptResFitSigma_sta_glbB_phi     = array("d")
  ptResFitSigma_sta_glbB_phi_Err = array("d")
  ptResFitMean_sta_glbB_phi     = array("d")
  ptResFitMean_sta_glbB_phi_Err = array("d")
  phi     = array("d")
  phi_Err = array("d")
  
  iHisto = -1
  for h in h_ptRes_sta_glbB_phi:
    iHisto = iHisto + 1

#    fitFunc = h[0][ iSample ].GetFunction( "fit"+h[0][ iSample ].GetName() )
#    ptResFitSigma_sta_glbB_phi.append( fitFunc.GetParameter( "Sigma" ) )
#    ptResFitSigma_sta_glbB_phi_Err.append( fitFunc.GetParError( 2 ) )
#    ptResFitMean_sta_glbB_phi.append( fitFunc.GetParameter( "Mean" ) )
#    ptResFitMean_sta_glbB_phi_Err.append( fitFunc.GetParError( 1 ) )
    
    ptResFitSigma_sta_glbB_phi.append( h[0][ iSample ].GetRMS() )
    ptResFitSigma_sta_glbB_phi_Err.append( h[0][ iSample ].GetRMSError() )
    ptResFitMean_sta_glbB_phi.append( h[0][ iSample ].GetMean() )
    ptResFitMean_sta_glbB_phi_Err.append( h[0][ iSample ].GetMeanError() )
    
    phi.append( h[3] )
    phi_Err.append( 0.15 )

  p_ptResFitSigma_sta_glbB_phi.append ( ROOT.TGraphErrors( len(h_ptRes_sta_glbB_phi), phi, ptResFitSigma_sta_glbB_phi, phi_Err, ptResFitSigma_sta_glbB_phi_Err ) )
  p_ptResFitSigma_sta_glbB_phi[ iSample ].SetLineColor(color)
  p_ptResFitSigma_sta_glbB_phi[ iSample ].SetMarkerColor(color)
  p_ptResFitSigma_sta_glbB_phi[ iSample ].SetMarkerStyle(marker)
  
  p_ptResFitMean_sta_glbB_phi.append ( ROOT.TGraphErrors( len(h_ptRes_sta_glbB_phi), phi, ptResFitMean_sta_glbB_phi, phi_Err, ptResFitMean_sta_glbB_phi_Err ) )
  p_ptResFitMean_sta_glbB_phi[ iSample ].SetLineColor(color)
  p_ptResFitMean_sta_glbB_phi[ iSample ].SetMarkerColor(color)
  p_ptResFitMean_sta_glbB_phi[ iSample ].SetMarkerStyle(marker)
  
  # Transverse momentum resolution in 16 bins of phi in Plus Endcap + Overlap ( 0.9 < eta < 2.4 )
  ptResFitSigma_sta_glbEOp_phi     = array("d")
  ptResFitSigma_sta_glbEOp_phi_Err = array("d")
  ptResFitMean_sta_glbEOp_phi     = array("d")
  ptResFitMean_sta_glbEOp_phi_Err = array("d")
  phi     = array("d")
  phi_Err = array("d")
  
  iHisto = -1
  for h in h_ptRes_sta_glbEOp_phi:
    iHisto = iHisto + 1
    
#    fitFunc = h[0][ iSample ].GetFunction( "fit"+h[0][ iSample ].GetName() )
#    ptResFitSigma_sta_glbEOp_phi.append( fitFunc.GetParameter( "Sigma" ) )
#    ptResFitSigma_sta_glbEOp_phi_Err.append( fitFunc.GetParError( 2 ) )
#    ptResFitMean_sta_glbEOp_phi.append( fitFunc.GetParameter( "Mean" ) )
#    ptResFitMean_sta_glbEOp_phi_Err.append( fitFunc.GetParError( 1 ) )
    
    ptResFitSigma_sta_glbEOp_phi.append( h[0][ iSample ].GetRMS() )
    ptResFitSigma_sta_glbEOp_phi_Err.append( h[0][ iSample ].GetRMSError() )
    ptResFitMean_sta_glbEOp_phi.append( h[0][ iSample ].GetMean() )
    ptResFitMean_sta_glbEOp_phi_Err.append( h[0][ iSample ].GetMeanError() )
    
    phi.append( h[3] )
    phi_Err.append( 0.15 )

  p_ptResFitSigma_sta_glbEOp_phi.append ( ROOT.TGraphErrors( len(h_ptRes_sta_glbEOp_phi), phi, ptResFitSigma_sta_glbEOp_phi, phi_Err, ptResFitSigma_sta_glbEOp_phi_Err ) )
  p_ptResFitSigma_sta_glbEOp_phi[ iSample ].SetLineColor(color)
  p_ptResFitSigma_sta_glbEOp_phi[ iSample ].SetMarkerColor(color)
  p_ptResFitSigma_sta_glbEOp_phi[ iSample ].SetMarkerStyle(marker)
  
  p_ptResFitMean_sta_glbEOp_phi.append ( ROOT.TGraphErrors( len(h_ptRes_sta_glbEOp_phi), phi, ptResFitMean_sta_glbEOp_phi, phi_Err, ptResFitMean_sta_glbEOp_phi_Err ) )
  p_ptResFitMean_sta_glbEOp_phi[ iSample ].SetLineColor(color)
  p_ptResFitMean_sta_glbEOp_phi[ iSample ].SetMarkerColor(color)
  p_ptResFitMean_sta_glbEOp_phi[ iSample ].SetMarkerStyle(marker)
  
  # Transverse momentum resolution in 16 bins of phi in Minus Endcap + Overlap ( -2.4 < eta < -0.9 )
  ptResFitSigma_sta_glbEOm_phi     = array("d")
  ptResFitSigma_sta_glbEOm_phi_Err = array("d")
  ptResFitMean_sta_glbEOm_phi     = array("d")
  ptResFitMean_sta_glbEOm_phi_Err = array("d")
  phi     = array("d")
  phi_Err = array("d")
  
  iHisto = -1
  for h in h_ptRes_sta_glbEOm_phi:
    iHisto = iHisto + 1
    
#    fitFunc = h[0][ iSample ].GetFunction( "fit"+h[0][ iSample ].GetName() )
#    ptResFitSigma_sta_glbEOm_phi.append( fitFunc.GetParameter( "Sigma" ) )
#    ptResFitSigma_sta_glbEOm_phi_Err.append( fitFunc.GetParError( 2 ) )
#    ptResFitMean_sta_glbEOm_phi.append( fitFunc.GetParameter( "Mean" ) )
#    ptResFitMean_sta_glbEOm_phi_Err.append( fitFunc.GetParError( 1 ) )
    
    ptResFitSigma_sta_glbEOm_phi.append( h[0][ iSample ].GetRMS() )
    ptResFitSigma_sta_glbEOm_phi_Err.append( h[0][ iSample ].GetRMSError() )
    ptResFitMean_sta_glbEOm_phi.append( h[0][ iSample ].GetMean() )
    ptResFitMean_sta_glbEOm_phi_Err.append( h[0][ iSample ].GetMeanError() )
    
    phi.append( h[3] )
    phi_Err.append( 0.15 )

  p_ptResFitSigma_sta_glbEOm_phi.append ( ROOT.TGraphErrors( len(h_ptRes_sta_glbEOm_phi), phi, ptResFitSigma_sta_glbEOm_phi, phi_Err, ptResFitSigma_sta_glbEOm_phi_Err ) )
  p_ptResFitSigma_sta_glbEOm_phi[ iSample ].SetLineColor(color)
  p_ptResFitSigma_sta_glbEOm_phi[ iSample ].SetMarkerColor(color)
  p_ptResFitSigma_sta_glbEOm_phi[ iSample ].SetMarkerStyle(marker)
  
  p_ptResFitMean_sta_glbEOm_phi.append ( ROOT.TGraphErrors( len(h_ptRes_sta_glbEOm_phi), phi, ptResFitMean_sta_glbEOm_phi, phi_Err, ptResFitMean_sta_glbEOm_phi_Err ) )
  p_ptResFitMean_sta_glbEOm_phi[ iSample ].SetLineColor(color)
  p_ptResFitMean_sta_glbEOm_phi[ iSample ].SetMarkerColor(color)
  p_ptResFitMean_sta_glbEOm_phi[ iSample ].SetMarkerStyle(marker)
